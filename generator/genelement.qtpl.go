// Code generated by qtc from "genelement.qtpl". DO NOT EDIT.
// See https://github.com/valyala/quicktemplate for details.

//line generator/genelement.qtpl:3
package generator

//line generator/genelement.qtpl:3
import (
	"github.com/delaneyj/toolbelt"
	"strings"
)

//line generator/genelement.qtpl:9
import (
	qtio422016 "io"

	qt422016 "github.com/valyala/quicktemplate"
)

//line generator/genelement.qtpl:9
var (
	_ = qtio422016.Copy
	_ = qt422016.AcquireByteBuffer
)

//line generator/genelement.qtpl:9
func StreamGenerateElement(qw422016 *qt422016.Writer, packageName string, e *Element) {
//line generator/genelement.qtpl:13
	tagPascal := toolbelt.Pascal(e.Tag)
	elementName := tagPascal + "Element"
	// attributesName := tagPascal + "Attributes"
	// eventHandlersName := tagPascal + "EventHandlers"

//line generator/genelement.qtpl:17
	qw422016.N().S(`
/* cSpell:disable */

package  `)
//line generator/genelement.qtpl:20
	qw422016.E().S(packageName)
//line generator/genelement.qtpl:20
	qw422016.N().S(`

type `)
//line generator/genelement.qtpl:22
	qw422016.E().S(elementName)
//line generator/genelement.qtpl:22
	qw422016.N().S(` struct {
    *Element
}

func `)
//line generator/genelement.qtpl:26
	qw422016.E().S(toolbelt.Upper(tagPascal))
//line generator/genelement.qtpl:26
	qw422016.N().S(`() *`)
//line generator/genelement.qtpl:26
	qw422016.E().S(elementName)
//line generator/genelement.qtpl:26
	qw422016.N().S(` {
    return &`)
//line generator/genelement.qtpl:27
	qw422016.E().S(elementName)
//line generator/genelement.qtpl:27
	qw422016.N().S(`{
        Element: &Element{
            Tag: "`)
//line generator/genelement.qtpl:29
	qw422016.E().S(e.Tag)
//line generator/genelement.qtpl:29
	qw422016.N().S(`",
            IsSelfClosing: `)
//line generator/genelement.qtpl:30
	qw422016.E().V(len(e.ChildElementsOrCategories) == 0)
//line generator/genelement.qtpl:30
	qw422016.N().S(`,
        },
    }
}

func (e *`)
//line generator/genelement.qtpl:35
	qw422016.E().S(elementName)
//line generator/genelement.qtpl:35
	qw422016.N().S(`) AddChildren(children ...*Element) *`)
//line generator/genelement.qtpl:35
	qw422016.E().S(elementName)
//line generator/genelement.qtpl:35
	qw422016.N().S(` {
    e.Children = append(e.Children, children...)
	return e
}
`)
//line generator/genelement.qtpl:39
	for _, a := range e.Attributes {
//line generator/genelement.qtpl:39
		qw422016.N().S(`
`)
//line generator/genelement.qtpl:41
		attrPascal := toolbelt.Pascal(a.Name)
		isBool := len(a.ValidValueTypes) == 1 && a.ValidValueTypes[0] == "boolean_attribute"

//line generator/genelement.qtpl:43
		qw422016.N().S(`
// `)
//line generator/genelement.qtpl:45
		qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:45
		qw422016.N().S(` is the "`)
//line generator/genelement.qtpl:45
		qw422016.E().S(a.Name)
//line generator/genelement.qtpl:45
		qw422016.N().S(`" attribute.
// `)
//line generator/genelement.qtpl:46
		qw422016.E().S(strings.ReplaceAll(a.Description, "\n", "  "))
//line generator/genelement.qtpl:46
		qw422016.N().S(`
// Valid values are constrained to the following:
`)
//line generator/genelement.qtpl:48
		for _, v := range a.ValidValueTypes {
//line generator/genelement.qtpl:48
			qw422016.N().S(`//   * `)
//line generator/genelement.qtpl:49
			qw422016.E().S(v)
//line generator/genelement.qtpl:49
			qw422016.N().S(`
`)
//line generator/genelement.qtpl:50
		}
//line generator/genelement.qtpl:51
		if isBool {
//line generator/genelement.qtpl:51
			qw422016.N().S(`func (e *`)
//line generator/genelement.qtpl:52
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:52
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:52
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:52
			qw422016.N().S(`() *`)
//line generator/genelement.qtpl:52
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:52
			qw422016.N().S(` {
    e.BoolAttributes["`)
//line generator/genelement.qtpl:53
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:53
			qw422016.N().S(`"] = struct{}{}
    return e
}

func (e *`)
//line generator/genelement.qtpl:57
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:57
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:57
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:57
			qw422016.N().S(`Remove() *`)
//line generator/genelement.qtpl:57
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:57
			qw422016.N().S(` {
    delete(e.BoolAttributes,"`)
//line generator/genelement.qtpl:58
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:58
			qw422016.N().S(`")
    return e
}

func (e *`)
//line generator/genelement.qtpl:62
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:62
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:62
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:62
			qw422016.N().S(`Set(v bool) *`)
//line generator/genelement.qtpl:62
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:62
			qw422016.N().S(` {
    if v {
        e.`)
//line generator/genelement.qtpl:64
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:64
			qw422016.N().S(`()
    } else {
        e.`)
//line generator/genelement.qtpl:66
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:66
			qw422016.N().S(`Remove()
    }
    return e
}
`)
//line generator/genelement.qtpl:70
		} else if a.IsKV {
//line generator/genelement.qtpl:70
			qw422016.N().S(`func (e *`)
//line generator/genelement.qtpl:71
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:71
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:71
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:71
			qw422016.N().S(`(k,v string) *`)
//line generator/genelement.qtpl:71
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:71
			qw422016.N().S(` {
    htmlStringer,ok := e.DelimitedKVAttributes["`)
//line generator/genelement.qtpl:72
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:72
			qw422016.N().S(`"]
    if !ok {
        htmlStringer = NewEqualSemicolonDelimitedKVString()
        e.DelimitedKVAttributes["`)
//line generator/genelement.qtpl:75
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:75
			qw422016.N().S(`"] = htmlStringer
    }
    htmlStringer.Add(k,v)
    return e
}

func (e *`)
//line generator/genelement.qtpl:81
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:81
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:81
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:81
			qw422016.N().S(`Remove(k string) *`)
//line generator/genelement.qtpl:81
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:81
			qw422016.N().S(` {
    htmlStringer,ok := e.DelimitedKVAttributes["`)
//line generator/genelement.qtpl:82
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:82
			qw422016.N().S(`"]
    if ok {
        htmlStringer.Remove(k)
    }
    return e
}
`)
//line generator/genelement.qtpl:88
		} else {
//line generator/genelement.qtpl:88
			qw422016.N().S(`func (e *`)
//line generator/genelement.qtpl:89
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:89
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:89
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:89
			qw422016.N().S(`(v string) *`)
//line generator/genelement.qtpl:89
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:89
			qw422016.N().S(` {
    htmlStringer := NewSpaceDelimitedString()
    e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:91
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:91
			qw422016.N().S(`"] = htmlStringer
    htmlStringer.Add(v)
    return e
}

func (e *`)
//line generator/genelement.qtpl:96
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:96
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:96
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:96
			qw422016.N().S(`Add(v string) *`)
//line generator/genelement.qtpl:96
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:96
			qw422016.N().S(` {
    htmlStringer,ok := e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:97
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:97
			qw422016.N().S(`"]
    if !ok {
        htmlStringer = NewSpaceDelimitedString()
        e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:100
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:100
			qw422016.N().S(`"] = htmlStringer
    }
    htmlStringer.Add(v)
    return e
}

func (e *`)
//line generator/genelement.qtpl:106
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:106
			qw422016.N().S(`) `)
//line generator/genelement.qtpl:106
			qw422016.E().S(attrPascal)
//line generator/genelement.qtpl:106
			qw422016.N().S(`Remove(v string) *`)
//line generator/genelement.qtpl:106
			qw422016.E().S(elementName)
//line generator/genelement.qtpl:106
			qw422016.N().S(` {
    htmlStringer,ok := e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:107
			qw422016.E().S(a.Name)
//line generator/genelement.qtpl:107
			qw422016.N().S(`"]
    if ok {
        htmlStringer.Remove(v)
    }
    return e
}
`)
//line generator/genelement.qtpl:113
		}
//line generator/genelement.qtpl:114
	}
//line generator/genelement.qtpl:114
	qw422016.N().S(`

`)
//line generator/genelement.qtpl:117
	for _, eh := range e.EventHandlers {
//line generator/genelement.qtpl:117
		qw422016.N().S(`
`)
//line generator/genelement.qtpl:119
		evt := "On" + toolbelt.Pascal(eh.Name[2:])

//line generator/genelement.qtpl:120
		qw422016.N().S(`
func (e *`)
//line generator/genelement.qtpl:122
		qw422016.E().S(elementName)
//line generator/genelement.qtpl:122
		qw422016.N().S(`) `)
//line generator/genelement.qtpl:122
		qw422016.E().S(evt)
//line generator/genelement.qtpl:122
		qw422016.N().S(`(evt string) (*`)
//line generator/genelement.qtpl:122
		qw422016.E().S(elementName)
//line generator/genelement.qtpl:122
		qw422016.N().S(`) {
    htmlStringer,ok := e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:123
		qw422016.E().S(eh.Name)
//line generator/genelement.qtpl:123
		qw422016.N().S(`"]
    if !ok {
        htmlStringer = NewSpaceDelimitedString()
        e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:126
		qw422016.E().S(eh.Name)
//line generator/genelement.qtpl:126
		qw422016.N().S(`"] = htmlStringer
    }
    htmlStringer.Add(evt)
    return e
}

func (e *`)
//line generator/genelement.qtpl:132
		qw422016.E().S(elementName)
//line generator/genelement.qtpl:132
		qw422016.N().S(`) `)
//line generator/genelement.qtpl:132
		qw422016.E().S(evt)
//line generator/genelement.qtpl:132
		qw422016.N().S(`Remove(evt string) (*`)
//line generator/genelement.qtpl:132
		qw422016.E().S(elementName)
//line generator/genelement.qtpl:132
		qw422016.N().S(`) {
    htmlStringer,ok := e.DelimitedStringAttributes["`)
//line generator/genelement.qtpl:133
		qw422016.E().S(eh.Name)
//line generator/genelement.qtpl:133
		qw422016.N().S(`"]
    if ok {
        htmlStringer.Remove(evt)
    }
    return e
}

`)
//line generator/genelement.qtpl:140
	}
//line generator/genelement.qtpl:140
	qw422016.N().S(`
`)
//line generator/genelement.qtpl:142
}

//line generator/genelement.qtpl:142
func WriteGenerateElement(qq422016 qtio422016.Writer, packageName string, e *Element) {
//line generator/genelement.qtpl:142
	qw422016 := qt422016.AcquireWriter(qq422016)
//line generator/genelement.qtpl:142
	StreamGenerateElement(qw422016, packageName, e)
//line generator/genelement.qtpl:142
	qt422016.ReleaseWriter(qw422016)
//line generator/genelement.qtpl:142
}

//line generator/genelement.qtpl:142
func GenerateElement(packageName string, e *Element) string {
//line generator/genelement.qtpl:142
	qb422016 := qt422016.AcquireByteBuffer()
//line generator/genelement.qtpl:142
	WriteGenerateElement(qb422016, packageName, e)
//line generator/genelement.qtpl:142
	qs422016 := string(qb422016.B)
//line generator/genelement.qtpl:142
	qt422016.ReleaseByteBuffer(qb422016)
//line generator/genelement.qtpl:142
	return qs422016
//line generator/genelement.qtpl:142
}

//line generator/genelement.qtpl:144
func StreamBaseFile(qw422016 *qt422016.Writer, packageName string) {
//line generator/genelement.qtpl:144
	qw422016.N().S(`package `)
//line generator/genelement.qtpl:145
	qw422016.E().S(packageName)
//line generator/genelement.qtpl:145
	qw422016.N().S(`

import (
	"slices"
	"strings"

	"github.com/samber/lo"
)

type Element struct {
	Tag                       string
	IsSelfClosing             bool
	BoolAttributes            map[string]struct{}
	DelimitedStringAttributes map[string]*DelimitedString
	DelimitedKVAttributes     map[string]*DelimitedKVString
	Children                  []*Element
}

func (e *Element) String() string {
	sb := &strings.Builder{}

	sb.WriteRune('<')
	sb.WriteString(e.Tag)

	values := lo.Entries(e.DelimitedStringAttributes)
	slices.SortFunc(values, func(a, b lo.Entry[string, *DelimitedString]) int {
		return strings.Compare(a.Key, b.Key)
	})
	for _, entry := range values {
		sb.WriteRune(' ')
		sb.WriteString(entry.Key)
		sb.WriteRune('=')
		sb.WriteRune('"')
		sb.WriteString(entry.Value.String())
		sb.WriteRune('"')
	}

	kvValues := lo.Entries(e.DelimitedKVAttributes)
	slices.SortFunc(kvValues, func(a, b lo.Entry[string, *DelimitedKVString]) int {
		return strings.Compare(a.Key, b.Key)
	})
	for _, entry := range kvValues {
		sb.WriteRune(' ')
		sb.WriteString(entry.Key)
		sb.WriteRune('=')
		sb.WriteRune('"')
		sb.WriteString(entry.Value.String())
		sb.WriteRune('"')
	}

	boolStrings := lo.Keys(e.BoolAttributes)
	slices.Sort(boolStrings)
	for _, name := range boolStrings {
		sb.WriteRune(' ')
		sb.WriteString(name)
	}

	if e.IsSelfClosing {
		sb.WriteString(" />")
		return sb.String()
	}

	sb.WriteRune('>')
	for _, child := range e.Children {
		sb.WriteString(child.String())
	}
	sb.WriteString("</")
	sb.WriteString(e.Tag)
	sb.WriteRune('>')

	return sb.String()
}

type DelimitedString struct {
	delimiter string
	values    map[string]struct{}
}

func (ds *DelimitedString) Add(values ...string) {
	for _, value := range values {
		ds.values[value] = struct{}{}
	}
}

func (ds *DelimitedString) Remove(values ...string) {
	for _, value := range values {
		delete(ds.values, value)
	}
}

func (ds *DelimitedString) String() string {
	values := lo.Keys(ds.values)
	slices.Sort(values)
	return strings.Join(values, ds.delimiter)
}

func NewDelimitedString(delimiter string) *DelimitedString {
	return &DelimitedString{
		delimiter: delimiter,
		values:    make(map[string]struct{}),
	}
}

func NewSpaceDelimitedString() *DelimitedString {
	return NewDelimitedString(" ")
}

type DelimitedKVString struct {
	associationDelimiter string
	delimiter            string
	values               map[string]string
}

func (ds *DelimitedKVString) Add(key, value string) {
	ds.values[key] = value
}

func (ds *DelimitedKVString) Remove(key string) {
	delete(ds.values, key)
}

func (ds *DelimitedKVString) String() string {
	values := make([]string, 0, len(ds.values))
	for k, v := range ds.values {
		values = append(values, k+ds.associationDelimiter+v)
	}
	slices.Sort(values)
	return strings.Join(values, ds.delimiter)
}

func NewDelimitedKVString(associationDelimiter, delimiter string) *DelimitedKVString {
	return &DelimitedKVString{
		delimiter:            delimiter,
		associationDelimiter: associationDelimiter,
		values:               make(map[string]string),
	}
}

func NewEqualSemicolonDelimitedKVString() *DelimitedKVString {
	return NewDelimitedKVString("=", ";")
}
`)
//line generator/genelement.qtpl:286
}

//line generator/genelement.qtpl:286
func WriteBaseFile(qq422016 qtio422016.Writer, packageName string) {
//line generator/genelement.qtpl:286
	qw422016 := qt422016.AcquireWriter(qq422016)
//line generator/genelement.qtpl:286
	StreamBaseFile(qw422016, packageName)
//line generator/genelement.qtpl:286
	qt422016.ReleaseWriter(qw422016)
//line generator/genelement.qtpl:286
}

//line generator/genelement.qtpl:286
func BaseFile(packageName string) string {
//line generator/genelement.qtpl:286
	qb422016 := qt422016.AcquireByteBuffer()
//line generator/genelement.qtpl:286
	WriteBaseFile(qb422016, packageName)
//line generator/genelement.qtpl:286
	qs422016 := string(qb422016.B)
//line generator/genelement.qtpl:286
	qt422016.ReleaseByteBuffer(qb422016)
//line generator/genelement.qtpl:286
	return qs422016
//line generator/genelement.qtpl:286
}
